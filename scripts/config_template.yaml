# ============================================================================
# reanalyzerGSE configuration template
# ============================================================================
# Copy this file and adjust the values for your analysis.
# Run with: reanalyzerGSE.sh -options your_config.yaml
# CLI arguments override values in this file.
# Leave values empty ("") or remove lines to use built-in defaults.
# ============================================================================

# === Input/Output ===
input: ""                              # GEO ID (GSEXXXXXX), folder with raw reads, or ENA/SRA accession
input_geo_reads: ""                    # Absolute path to combine GEO metadata download with existing reads
input_filter_regex: ""                 # Regex to filter input files in local mode (e.g. "Sample_A|Sample_B")
name: ""                               # Name of the project/folder to create
output_folder: ""                      # Destination folder
genes: "none"                          # Genes to highlight in plots (comma-separated, no spaces)
TMPDIR_arg: ""                         # TMPDIR directory ('system' for system default, or an absolute path)

# === Reference and databases ===
reference_genome: ""                   # Reference genome (.fasta or .gz, absolute path)
reference_genome_index: ""             # Pre-built genome index (absolute path)
annotation: ""                         # Reference annotation (.gtf, absolute path; comma-separated for multiple)
transcripts: ""                        # Reference transcripts (.fasta cDNA, used if -s not provided)
kraken2_databases: ""                  # Kraken2 database folder (activates decontamination step)
sortmerna_databases: ""                # SortMeRNA database path (activates rRNA removal step)
databases_function: "GO_Biological_Process_2023,GO_Molecular_Function_2023,GO_Cellular_Component_2023"
non_reference_funct_enrichm: ""            # Annotation file (GAF, GMT, GFF, GTF) for functional enrichment in non-model organisms

# === Metadata and sample info ===
design_custom_local: ""                # Experimental design for local dataset (comma-separated list, '/' for multiple)
design_custom: "no"                    # Manually specify experimental design for GEO ('yes' or 'no')
organism: ""                           # Scientific name with underscore (e.g. Homo_sapiens)
taxonid: ""                            # NCBI taxon ID
number_reads_to_subsample: ""          # Path to reads_numbers.txt and target library size (comma-separated). NOTE: the number is the desired library size (counted/mapped reads), NOT raw reads; proportions are computed automatically
batch_vector: ""                       # Comma-separated batch vector for Combat-seq
batch_biological_covariates: ""        # Comma-separated biological covariables for Combat-seq
batch_format: "fact"                   # Format of batch variables ('num' or 'fact')
covariables: "none"                    # Covariable for limma/edgeR model (comma-separated)
covariables_format: "num"              # Format of covariables ('num' or 'fact')
target: "no"                           # Target file for DGE analyses

# === Activate alternative modes ===
debug_step: "all"                      # Step to resume from ('step1'..'step9', or 'all')
qc_raw_reads: "yes"                    # QC on raw reads ('yes' or 'no')
full_differential_analyses: "yes"      # Full differential analyses ('yes' or 'no')
functional_enrichment_analyses: "yes"  # Functional enrichment ('yes' or 'no')
clusterProfiler_full: "no"            # Additional clusterProfiler analyses ('yes' or 'no')
batch: "no"                            # Batch effect correction ('yes' or 'no')
bed_mode: "no"                         # Convert to BED format for genome browsers ('yes' or 'no')
deconvolution: "no"                    # Deconvolution by CDSeq ('yes' or 'no')
perform_volcano_venn: "yes"            # Volcano plots and Venn diagrams ('yes' or 'no')
aPEAR_execution: "no"                 # aPEAR pathway clustering ('yes' or 'no')
tidy_tmp_files: "no"                   # Space-efficient run, remove tmp files ('yes' or 'no')
convert_tables_excel: "no"             # Convert tables to .xlsx ('yes' or 'no')
time_course: "no"                      # Time-course analyses ('yes' or 'no')
network_analyses: "no"                 # Network analyses, human/mouse only ('yes' or 'no')
auto_panther_log: "no"                 # Additional autoGO/Panther by log2Fc ('yes' or 'no')
exploreDE_se: "no"                     # Generate SummarizedExperiment for exploreDE app ('yes' or 'no', Human only)

# === Processing parameters ===
strand: ""                             # Strandness ('yes', 'no', 'reverse'; predicted by salmon if empty)
filter: "standard"                     # Gene count threshold ('bin', 'filterbyexpr', or 'standard')
optionsFeatureCounts_feat: "exon"      # featureCounts feature type
optionsFeatureCounts_seq: "gene_name"  # featureCounts seqid type
aligner: "star"                        # Aligner ('hisat2' or 'star')
differential_expr_soft: "edgeR"        # DGE software ('edgeR' or 'DESeq2')
fastp_mode: "no"                       # Quality filtering by fastp ('yes' or 'no')
fastp_adapter: "no"                    # Adapter trimming by fastp ('yes', 'no', or path to fasta)
fastp_trimming: "none"                 # Trimming by fastp ('none' or 'front,tail' as numbers)
time_course_std: 1                     # SD threshold for time-course filtering
time_course_fuzz: 0                    # Fuziness for soft clustering (0 = auto-estimate)

# === Filtering out samples/comparisons ===
GSM_filter: ""                         # Restrict to specific GSM ids (comma-separated)
stop: "no"                             # Manual stop for file modification ('yes' or 'no')
pattern_to_remove: "none"              # Pattern to exclude samples from analyses
differential_expr_comparisons: "no"    # Restrict comparisons ('no' or 'A\\B,C\\D,...')

# === Functional enrichment/networking analyses ===
clusterProfiler_method: "fdr"          # P-value adjustment method
clusterProfiler_universe: "detected"   # Universe ('all' or 'detected')
clusterProfiler_minGSSize: 10          # Min gene set size
clusterProfiler_maxGSSize: 500         # Max gene set size
panther_method: "FDR"                  # Panther p-value adjustment ('NONE', 'BONFERRONI', or 'FDR')
revigo_threshold_similarity: 0.7       # Revigo similarity threshold (0.4-0.9)

# === BAM filtering (post-alignment) ===
bam_mapq_threshold: 0                 # Min MAPQ for samtools view -q and featureCounts -Q (0 = use default)
bam_exclude_flags: ""                  # samtools -F flags to exclude, e.g. "4" (unmapped), "256" (secondary), "2308" (unmapped+secondary+supplementary)
bam_require_flags: ""                  # samtools -f flags to require. SUGGESTION: use "2" for Paired-End to keep properly paired reads, or leave as "" (or "4") for Single-End.
bam_dedup: "no"                        # Duplicate removal: 'no', 'samtools', 'picard', 'picard_optical' (see below)
                                       #   no             = no deduplication
                                       #   samtools       = samtools markdup -r (remove all duplicates)
                                       #   picard         = picard MarkDuplicates REMOVE_DUPLICATES=true
                                       #   picard_optical = picard MarkDuplicates REMOVE_SEQUENCING_DUPLICATES=true (optical/sequencing only)

# === Performance ===
cores: 30                              # Number of cores for multithreading
cores_reads_to_subsample: 10           # Cores for seqtk subsampling
cores_index: 30                        # Cores for genome indexing
memory_max: 257698037760               # Max RAM in bytes (~240GB)
number_parallel: 10                    # Files processed in parallel
compression_level: 9                   # Gzip compression level (0-9)
aligner_index_cache: "yes"             # Keep genome index in cache ('yes' or 'no')
kraken2_fast: "no"                     # Copy Kraken2 DB to RAM ('yes' or 'no')
